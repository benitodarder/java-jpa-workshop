-- Schema
CREATE TABLE UNIT (
	id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
	name varchar(64),
	abbreviation varchar(8),
	enabled BOOLEAN DEFAULT TRUE NOT NULL
)
CREATE TABLE COMPONENT (
	id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
	unitId INT, 
	name varchar(64),
	quantity DOUBLE,
	enabled BOOLEAN DEFAULT TRUE NOT NULL,
	FOREIGN KEY(unitId) REFERENCES UNIT(id) -- n to 1
)
CREATE TABLE PRODUCT (
	id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
	name varchar(64), 
	description varchar(512),
	enabled BOOLEAN DEFAULT TRUE NOT NULL	
)
CREATE TABLE ASSEMBLY (
	componentId INT NOT NULL,
	productId INT NOT NULL,
	quantity DOUBLE,
	enabled BOOLEAN DEFAULT TRUE NOT NULL,
	PRIMARY KEY(componentId, productId),	
	FOREIGN KEY(componentId) REFERENCES COMPONENT(id),
	FOREIGN KEY(productId) REFERENCES PRODUCT(id)
)
CREATE TABLE UNITCONVERSION (
	fromUnitId INT NOT NULL,
	toUnitId INT NOT NULL,
	factor DOUBLE,
	enabled BOOLEAN DEFAULT TRUE NOT NULL,
	PRIMARY KEY(fromUnitId, toUnitId),	
	FOREIGN KEY(fromUnitId) REFERENCES UNIT(id),
	FOREIGN KEY(toUnitId) REFERENCES UNIT(id)
);
